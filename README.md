# Battery design for battery-electric long-haul trucks

This repository provides the source-code to a five-step battery design method for battery-electric long-haul trucks. The method and results are documented in the dissertation by Olaf Teichert entitled "Battery design for battery-electric long-haul trucks". The five steps are: 
  - Cell selection
  - Battery model parametrization and validation
  - Power profile generation
  - Battery life simulation
  - Battery thermal management system design

## Cell selection

To reach cost-parity with diesel trucks, battery-electric trucks require fast-chargeable lithium-ion cells with a high energy density and cycle life, at a low specific cost. However, cells generally excel at only a fraction of these characteristics. To help select the optimal cell, I developed the techno-economic cell selection method. The folder "Step1_cell_selection" contains the source code to the method, which I used to select the optimal cell out of a database containing over 160 cells for a long-haul truck operating with a single driver in Germany. 

To run the code, you'll need a python distribution with the following packages: 
  - pandas
  - numpy
  - scipy
  - numba
  - matplotlib

The results and all figures are generated by executing the file main.py. The execution time on a 16GB RAM, 1.8GHz machine is less than 30 seconds.

## Battery model

To obtain a better estimate of the battery life for the selected cell under typical truck operating conditions, a battery model of the VW ID.3 is parametrized and validated on vehicle level. The folder "Step2_batterymodel" contains the source code to the battery model, model parametrization and validation. In addition to the code provided in this repository, the following data files need to be obtained: 

From https://doi.org/10.14459/2022mp1656314 copy the files
- under Data\02_Battery\06_HPPC to Step2_model_parametrization\Parametrization\1_Electric\Input
- under Data\03_Vehicle\06_Cycles\03_RealWorld_Driving\Real_driving_15deg to Step2_model_parametrization\Inputs\Profiles
- under Data\03_Vehicle\06_Cycles\03_RealWorld_Driving\Real_driving_30deg to Step2_model_parametrization\Inputs\Profiles
- under 03_Vehicle\04_Charging_sequences to Step2_model_parametrization\Inputs\Profiles

Running the software requires a Julia distribution version 1.6.5 or above and the following packages: 
  - DelimitedFiles
  - Statistics
  - Interpolations
  - JLD
  - Plots
  - DataFrames
  - StatsPlots

The validation for all cycles is executed by running the file main.jl. The execution time on a 16GB RAM, 1.8GHz machine is less than 2 minutes.

## Power profile generation

To estimate battery life and safety under typical truck operating conditions, a power profile is required. The power profile should represent the typical power demand (driving) and supply (charging and regeneration) for battery-electric trucks. The code in the folder "Step3_power_profile" can be used to generate an annual load profile for battery-electric trucks, based on the method developed by Gaete-Morales et al. (An open tool for creating battery-electric vehicle time series from empirical data, emobpy). 

Running the software requires a python distribution with the following packages: 
  - numpy
  - numba
  - scipy
  - pandas
  - pickle

The power profile is generated by executing the main.py script. The execution time on a 16GB RAM, 1.8GHz machine is less than 15 minutes.

## Batterylife simulation

Based on the validated battery model and the generated power profile that reflects typical truck operating conditions, the lifetime of the truck battery can be simulated. The code in the folder "Step4_lifetime_simulation" simulates battery operation over lifetime for the Munich ambient temperature. The loadprofile generated in step 3 should be used as an input. Note that the results might differ slightly due to the stochastic nature of the load profile.

Running the software requires a Julia distribution version 1.6.5 or above and the following packages: 
  - DelimitedFiles
  - Statistics
  - Interpolations
  - JLD
  - Plots
  - DataFrames
  - StatsPlots

The validation for all cycles is executed by running the file main.jl. The execution time on a 16GB RAM, 1.8GHz machine is less than 2 minutes.

## Battery thermal management system design

In the last step of the battery design method, the impact of the battery thermal management system on the battery life and battery safety is investigated. Running the code in the folder "Step5_btms_design" executes full factorial simulations of the impact of the installed cooling power and cooling threshold.

Running the software requires a Julia distribution version 1.6.5 or above and the following packages: 
  - DelimitedFiles
  - Statistics
  - Interpolations
  - JLD
  - Plots
  - DataFrames
  - StatsPlots

The validation for all cycles is executed by running the file main.jl. The execution time on a 16GB RAM, 1.8GHz machine is less than 3 hours.